# Upgrading to v1.0.0-rc0

Between v0.11 and v1.0.0-rc0 some breaking changes have occured, so here comes the guide that will help you adjust your code to the new API. See the [changelog](https://github.com/membraneframework/membrane_core/releases/tag/v1.0.0-rc0) for detailed description of the changes.

## Deps upgrade

Update `membrane_core` to `v1.0.0-rc0`
```elixir 
defp deps do
   [
     {:membrane_core, "~> 1.0.0-rc0"},
     ...
   ]
end
```

## Remove the pipeline's `:playback` action
There is no more `:playback` action available! 
The pipeline will start playing automatically once its setup is complete.
If you need to start the pipeline as soon as possible, simply do not return the `:playback` action in `handle_init` or `handle_setup` callbacks:
```diff
@impl true
def handle_setup(_ctx, state) do
  ...
- {[playback: :playing], state}
+ {[], state}
end
```
In case you need to defer the moment the pipeline starts playing, and for this purpose you have returned `:playback` action in some other callback than `handle_init` and `handle_setup`, now you need to do two things - first, mark the setup as incomplete with `Membrane.Pipeline.Action.setup`](https://hexdocs.pm/membrane_core/1.0.0-rc0/Membrane.Pipeline.Action.html#t:setup/0) action returned from `handle_setup`, to prevent it from automatically changing the playback to `:playing`:

```diff
+ @impl true
+ def handle_setup(_ctx, state) do
+   {[setup: :incomplete]}
+ end
```

Then, you need to return `setup: :complete` instead of `playback: :playing` action in a callback after which completion you want your pipeline to start playing:
```diff
@impl true
def handle_info(:no_start_playing, _ctx, state) do
...
- {[playback: playing], state}
+ {[setup: :complete], state}
end
```

## Rename `handle_process` and `handle_write` into `handle_buffer`
Names of the callbacks that are used to process buffers have been unified. This applies to:
* `Membrane.Filter.handle_process/4` and `Membrane.Filter.handle_process_list/4`
* `Membrane.Endpoint.handle_write/4` and `Membrane.Endpoint.handle_write_list/4`
* `Membrane.Sink.handle_write/4` and `Membrane.Sink.handle_write_list/4`

```diff
defmodule CustomFilter
  use Membrane.Filter
  ...
  @impl true
- def handle_process(_pad, buffer, _ctx, state) do
+ def handle_buffer(_pad, buffer, _ctx, state) do
    ...
  end
  ...
end
```